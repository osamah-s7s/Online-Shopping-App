# name: Android Instrumented Tests

# on:
#   push:
#     branches: [ main, master ]
#   pull_request:
#     branches: [ main, master ]
#   workflow_dispatch:

# jobs:
#   instrumented-tests:
#     runs-on: macos-latest
    
#     steps:
#     - name: Checkout code
#       uses: actions/checkout@v4

#     - name: Set up JDK 17
#       uses: actions/setup-java@v4
#       with:
#         distribution: 'temurin'
#         java-version: '17'
#         cache: 'gradle'

#     - name: Setup Android SDK
#       uses: android-actions/setup-android@v3

#     - name: Create google-services.json placeholder
#       run: |
#         if [ ! -f "app/google-services.json" ]; then
#           echo '{"project_info":{"project_number":"000000000000","project_id":"placeholder","storage_bucket":"placeholder.appspot.com"},"client":[{"client_info":{"mobilesdk_app_id":"1:000000000000:android:placeholder","android_client_info":{"package_name":"com.oshu.store"}},"oauth_client":[{"client_id":"placeholder.apps.googleusercontent.com","client_type":3}],"api_key":[{"current_key":"PLACEHOLDER_API_KEY"}],"services":{"appinvite_service":{"other_platform_oauth_client":[{"client_id":"placeholder.apps.googleusercontent.com","client_type":3}]}}}],"configuration_version":"1"}' > app/google-services.json
#         fi

#     - name: Grant execute permission for gradlew
#       run: chmod +x gradlew

#     - name: Cache Gradle dependencies
#       uses: actions/cache@v4
#       with:
#         path: |
#           ~/.gradle/caches
#           ~/.gradle/wrapper
#         key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
#         restore-keys: |
#           ${{ runner.os }}-gradle-

#     - name: Start Emulator
#       uses: reactivecircus/android-emulator-runner@v2
#       with:
#         api-level: 29
#         arch: arm64-v8a
#         script: |
#           ./gradlew connectedAndroidTest

#     - name: Upload Test Results
#       uses: actions/upload-artifact@v4
#       if: always()
#       with:
#         name: instrumented-test-results
#         path: app/build/outputs/androidTest-results/
#         retention-days: 7



